# Feature

1. 用户分级
   1. 管理员： 录入信息；包括：出发城市、目的城市、出发时间、到达时间、班次、交通方式（飞机||火车）以及费用。
   2. 普通用户：查询信息；有起始城市和目的城市，并选择何种最优决策（最快到达||最省钱到达）。
   3. ==**（可变需求）**==密码的加密算法，用户的寻址算法（数据库）
   3. ==**（必要需求）**==鉴权功能



# Requirements&Architecture

1. **登陆系统模块==（高需求度）==**
   1. 普通用户 vs. 管理员用户==（鉴权模块）==
   1. 用户名和密码的加密==（可选模块）==
2. **IO系统模块==（必要模块）==**
   1. **Input模块**
      1. **命令处理**
         1. **通用命令==(Case-Insensitive)==**
            1. **无法处理的命令的处理方法**
               1. **对于命令在不在命令表中的**
                  1. 输出`Error Command. Input 'help' to get all commands.`
               2. **对于命令在命令表中而参数不正确的**
                  1. 输出`Error format of command {command}. Input '{command} -h' for help.`
                  2. 注意，上文的`{command}`指的是具体命令，如`query` 
            2. **help**
               1. ==(核心功能)==输出全部命令
               2. **==注意：==** **不需要**包括各命令的详细用法
               3. ==无参数==
            3. **quit**
               1. ==(核心功能)==退出系统
               2. ==**注意：**==需要进行确认（你确定要退出系统吗[Y/N])
               3. ==无参数==
            4. **query**
               1. ==(核心功能)==查询数据
               2. ==(基本语法)==`query (-b|--begin) city1 (-e | --end) city2 (-f factor| -n (0 | 1))`
               3. ==参数==:
                  1. **无参数**								   输出帮助信息 
                  2. **-h**										   输出帮助信息
                  3. **-b city1 | --begin city1** 	 指定出发城市
                  4. **-e city2 | --end city2** 		指定目的城市
                  5. **(-f factor | -n (0 | 1))**         指定最优决策
                     1. **-f**参数仅有**money**和**time**两个取值
                     2. **-n**参数的**0、1**分别代表**money**和**time**因素
         2. **管理员命令**
            1. **edit**
               1. ==(**注意**)==本功能在执行前要鉴权
                  1. 仅管理员可用，非管理员用户输入这个命令时要做必要提示
               2. ==(核心功能)==对于数据的编辑，包括增、删和改
               3. ==(基本语法)==`edit (-o OPERATE | -s)`
               4. ==(参数)==
                  1. **无参数** 输出帮助信息 
                  2. **-s**
                     1. 首先要检查内存中是否有存储修改的临时数据，没有**要提示用户并没有edit数据**
                     2. 将保存的临时数据保存到文件中
                  3. **-o OPERATE**
                     1. **OPERATE**取值共三种：`insert`、`delete`和`update`==(Case-Sensitive)==
                     2. 具体处理过程见5.2子程序划分
               5. ==(使用方法)==这命令相当于选择进入三个不同子程序：
                  1. **==(注意)==**功能的切割划分可用减少代码量，比如**insert子程序**和**delete子程序**如果切分得当，**update子程序**可复用前述部分功能，且insert和delete子程序也存在部分公用功能，注意解耦
                  2. **子程序划分**
                     1. **insert子程序**
                        1. 要显示的输入提示信息为`出发城市\t目的城市\t出发时间\t到达时间\t班次\t交通方式\t费用`
                        2. 接受用户输入直到用户输入`THEEND`
                           1. 要对输入信息进行一定校验(类型校验)，**不通过要==报错==**
                        3. 暂存数据到内存并输出，输出格式如上
                     2. **delete子程序**
                        1. 首先输出存储的表信息，表头为`索引号\t出发城市\t目的城市\t出发时间\t到达时间\t班次\t交通方式\t费用`
                        2. 接受用户输入索引号直到用户输入`THEEND`
                           1. **注意，==务必==检查用户输入的索引号是否有数据，没有要报错**
                        3. 删除用户指定位置的内容并暂存内存，然后输出删除后的表
                     3. **update子程序**
                        1. 首先输出存储的表信息，表头为`索引号\t出发城市\t目的城市\t出发时间\t到达时间\t班次\t交通方式\t费用`
                        2. 显示输入提示信息为`索引号\t出发城市\t目的城市\t出发时间\t到达时间\t班次\t交通方式\t费用`，接受用户输入直到用户输入`THEEND`
                           1. **注意，==务必==检查用户输入的索引号是否有数据，没有要报错**
                           2. 要对输入信息进行一定校验(类型校验)，**不通过要==报错==**
                        3. 用新输入替换原相同索引号处的数据
            2. **show**
               1. ==(**注意**)==本功能在执行前要鉴权
                  1. 仅管理员可用，非管理员用户输入这个命令时要做必要提示
               2. ==(核心功能)==显示读取到的全部城市数据
                  1. 输出数据的表头为`索引号\t出发城市\t目的城市\t出发时间\t到达时间\t班次\t交通方式\t费用`
               3. ==无参数==
      2. **数据初始化**
         1. **==启动系统的第一时间==**，通过读取已保存的文件数据到内存完成数据的初始化
            1. **==无法初始化==**(不存在文件的，或文件无法读取，或文件信息出现错误的，或文件内容为空的)
               1. 输出对应错误信息
               2. 对于不同用户
                  1. **普通用户**，让用户确认退出并通知管理员
                  2. **管理员用户**，让用户使用**edit**命令初始化数据
   2. **Output模块**
      1. **对于初始化成功/失败的反馈信息**
      2. **对于CURD的返回信息**
         1. **特别的**：
            1. 针对查询模块的输出：
               1. **输出结构体**：
                  1. **{[(途经城市名1, 到达该城市时间1, 交通方式1, 费用1, 出发时间1, 到达下一个城市时间1, 到达的下一个城市名1)...], ((最短时间, 费用) || (最少费用, 时间))}**
                  2. **其中**，
                     1. **{}**表示是一个不同结构体的集合
                     2. **[(), (), ...]**表示是一个由**()**结构体组成的数组
                     3. **(() || ())**表示这个结构体为不同优先级输出的不同最终结果
                  3. **意义**：依次于何时何地乘坐几点的飞机或火车于何时到达何地；最终所需的最快需要多长时间才能到达及旅费，或者最少需要多少旅费才能到达及时间。
   3. **最优决策功能模块==（核心模块）==**
      1. 核心算法：**Dijkstra算法**

# Flow Graph

![FlowGraph](./MarkdownRes/Pictures/FlowGraph.svg)
